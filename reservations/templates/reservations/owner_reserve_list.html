<!-- filepath: /Users/pc/Documents/project/LINE/reservations/templates/reservations/owner_menu_confirm_delete.html -->
{% extends 'base.html' %}

{% block title %}ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤ç¢ºèª - {{ tenant.name|escape }}{% endblock %}

{% block extra_head %}
<meta name="robots" content="noindex, nofollow">
<style>
    .delete-confirmation {
        max-width: 600px;
        margin: 40px auto;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
    }
    .warning-icon {
        font-size: 80px;
        color: #dc3545;
        margin-bottom: 20px;
    }
    .menu-info {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 20px;
        margin: 20px 0;
        text-align: left;
    }
    .action-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
    }
    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s;
    }
    .btn-danger {
        background: #dc3545;
        color: white;
    }
    .btn-danger:hover {
        background: #c82333;
        transform: translateY(-1px);
    }
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    .btn-secondary:hover {
        background: #545b62;
        color: white;
        text-decoration: none;
        transform: translateY(-1px);
    }
    .security-warning {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 20px;
        font-size: 14px;
    }
    @media (max-width: 768px) {
        .action-buttons {
            flex-direction: column;
        }
        .delete-confirmation {
            margin: 20px;
            padding: 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="delete-confirmation">
    <div class="warning-icon">âš ï¸</div>
    
    <h2>ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤ç¢ºèª</h2>
    
    <div class="security-warning">
        <strong>ğŸ”’ é‡è¦:</strong> ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«é–¢é€£ã™ã‚‹äºˆç´„ãƒ‡ãƒ¼ã‚¿ã‚‚å½±éŸ¿ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
    </div>
    
    <p style="font-size: 18px; color: #495057;">
        æœ¬å½“ã«ä»¥ä¸‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ
    </p>
    
    <div class="menu-info">
        <h4>ğŸ“‹ å‰Šé™¤å¯¾è±¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h4>
        <p><strong>ğŸª åº—èˆ—å:</strong> {{ tenant.name|escape }}</p>
        <p><strong>ğŸ½ï¸ ãƒ¡ãƒ‹ãƒ¥ãƒ¼å:</strong> {{ menu.name|escape }}</p>
        {% if menu.description %}
            <p><strong>ğŸ“ èª¬æ˜:</strong> {{ menu.description|escape }}</p>
        {% endif %}
        {% if menu.price %}
            <p><strong>ğŸ’° ä¾¡æ ¼:</strong> Â¥{{ menu.price|floatformat:0 }}</p>
        {% endif %}
        <p><strong>ğŸ“… ä½œæˆæ—¥:</strong> {{ menu.created_at|date:"Yå¹´mæœˆdæ—¥ H:i"|default:"ä¸æ˜" }}</p>
    </div>
    
    <form method="post" id="deleteForm">
        {% csrf_token %}
        <div class="action-buttons">
            <a href="{% url 'owner_menu_list_by_tenant' tenant.slug %}" class="btn btn-secondary">
                â† ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </a>
            <button type="submit" class="btn btn-danger" id="deleteBtn">
                ğŸ—‘ï¸ å‰Šé™¤ã™ã‚‹
            </button>
        </div>
    </form>
</div>

<script>
// å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
document.getElementById('deleteForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const menuName = "{{ menu.name|escape|escapejs }}";
    const confirmMessage = `æœ¬å½“ã«ã€Œ${menuName}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚`;
    
    if (confirm(confirmMessage)) {
        // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã‚¹ãƒ‘ãƒ é˜²æ­¢
        const deleteBtn = document.getElementById('deleteBtn');
        deleteBtn.disabled = true;
        deleteBtn.textContent = 'ğŸ”„ å‰Šé™¤ä¸­...';
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’é€ä¿¡
        this.submit();
    }
});

// ESCã‚­ãƒ¼ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        const cancelUrl = "{% url 'owner_menu_list_by_tenant' tenant.slug %}";
        if (confirm('å‰Šé™¤ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ')) {
            window.location.href = cancelUrl;
        }
    }
});

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
    console.log('ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤ç¢ºèªãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
    
    // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Šã‚’5ç§’å¾Œã«å¼·èª¿è¡¨ç¤º
    setTimeout(() => {
        const warning = document.querySelector('.security-warning');
        if (warning) {
            warning.style.background = '#f8d7da';
            warning.style.borderColor = '#f5c6cb';
            warning.style.color = '#721c24';
        }
    }, 5000);
});
</script>
{% endblock %}