<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>開発者ダッシュボード - 予約システム</title>
    <style>
        /* --- 基本設定とカラーパレット --- */
        :root {
            /* 色の定義 */
            --color-background: #f0f2f5; /* 背景: ライトグレー */
            --color-white: #ffffff;      /* カード背景: 白 */
            --color-text: #2d3748;        /* 基本テキスト: 黒に近いダークグレー */
            --color-text-light: #718096;  /* 補助テキスト: グレー */
            
            --color-primary: #1A365D;     /* 紺色: メインカラー、アクティブ要素 */
            --color-primary-light: #EBF8FF; /* 紺色（淡）: ホバー背景など */
            --color-success: #38A169;     /* 緑色: 成功、プラスの指標 */
            --color-accent-gold: #D69E2E; /* 金色: アクセント、注意喚起 */
            
            --color-border: #E2E8F0;     /* 罫線 */

            /* UI要素の定義 */
            --font-family-base: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.04), 0 1px 2px 0 rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border-radius: 12px;
        }

        /* --- 全体スタイル --- */
        body {
            font-family: var(--font-family-base);
            margin: 0;
            padding: 24px;
            background-color: var(--color-background);
            color: var(--color-text);
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* --- ヘッダー --- */
        .header {
            background-color: var(--color-primary);
            color: var(--color-white);
            padding: 32px;
            border-radius: var(--border-radius);
            margin-bottom: 32px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 0 0 8px 0;
        }
        .header p {
            margin: 0;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.85);
        }
        .user-info {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 16px;
        }

        /* --- お知らせ --- */
        .info-notice {
            display: flex;
            align-items: center;
            gap: 16px;
            background: var(--color-white);
            padding: 16px 24px;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--color-accent-gold);
            box-shadow: var(--shadow-sm);
            margin-bottom: 32px;
        }
        .info-notice svg {
            width: 28px;
            height: 28px;
            color: var(--color-accent-gold);
            flex-shrink: 0;
        }
        .info-notice p {
            margin: 0;
            color: var(--color-text);
        }

        /* --- 統計カード --- */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: var(--color-white);
            padding: 24px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.2s ease-in-out;
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        .stat-icon {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
            display: grid;
            place-items: center;
            border-radius: 50%;
        }
        .stat-icon svg {
            width: 28px;
            height: 28px;
        }
        .stat-card.primary .stat-icon { background-color: var(--color-primary-light); color: var(--color-primary); }
        .stat-card.success .stat-icon { background-color: #F0FFF4; color: var(--color-success); }
        .stat-card.gold .stat-icon { background-color: #FEFBF6; color: var(--color-accent-gold); }
        
        .stat-card h3 {
            font-size: 2rem;
            margin: 0;
            font-weight: 700;
        }
        .stat-card p {
            margin: 2px 0 0;
            font-size: 0.9em;
            color: var(--color-text-light);
        }

        /* --- メインカード --- */
        .card {
            background: var(--color-white);
            padding: 24px 32px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--color-border);
        }
        .card h2 {
            font-size: 1.5rem;
            margin: 0 0 20px 0;
        }
        
        /* --- テーブル --- */
        .table-container { overflow-x: auto; }
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px; /* テーブルが崩れない最小幅 */
        }
        thead th {
            background-color: #f8f9fa;
            font-weight: 600;
            text-align: left;
            padding: 12px 16px;
            border-bottom: 2px solid var(--color-border);
        }
        tbody td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--color-border);
            vertical-align: middle;
        }
        tbody tr:last-child td { border-bottom: none; }
        tbody tr:hover { background-color: #fcfdff; }

        .tenant-actions { display: flex; gap: 8px; flex-wrap: nowrap; }

        .no-data { text-align: center; padding: 40px 0; }
        .no-data p { margin: 0 0 16px 0; color: var(--color-text-light); }

        /* --- ボタン --- */
        .btn {
            padding: 10px 24px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary { background-color: var(--color-primary); color: var(--color-white); }
        .btn-primary:hover { background-color: #112644; transform: translateY(-2px); box-shadow: var(--shadow-md); }

        .btn-secondary { background-color: var(--color-white); color: var(--color-text); border-color: var(--color-border); }
        .btn-secondary:hover { background-color: #f7fafc; border-color: var(--color-text-light); }

        .btn-accent-outline { background-color: transparent; color: var(--color-accent-gold); border-color: var(--color-accent-gold); }
        .btn-accent-outline:hover { background-color: #FEFBF6; transform: translateY(-2px); }

        .btn-sm { padding: 6px 14px; font-size: 0.85rem; }

        /* --- フッター --- */
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
        }

        /* --- レスポンシブ --- */
        @media (max-width: 768px) {
            body { padding: 16px; }
            .header h1 { font-size: 1.8rem; }
            .hide-on-mobile { display: none; }
            .footer-links { flex-direction: column; }
            .card { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>開発者ダッシュボード</h1>
            <p>システム全体の管理・監視</p>
            <div class="user-info">ユーザー: {{ user.username|escape }}</div>
        </div>

        <div class="info-notice">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" /></svg>
            <p><strong>注意:</strong> このページは開発者専用です。すべての操作は記録されています。</p>
        </div>
        
        <div class="stats">
            <div class="stat-card primary">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21v-7.5m-1.5-1.5a1.5 1.5 0 013 0m3-1.5a1.5 1.5 0 013 0m3-1.5a1.5 1.5 0 013 0M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
                </div>
                <div>
                    <h3>{{ tenants.count|default:0 }}</h3>
                    <p>総テナント数</p>
                </div>
            </div>
            <div class="stat-card success">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                </div>
                <div>
                    <h3>{{ users.count|default:0 }}</h3>
                    <p>総ユーザー数</p>
                </div>
            </div>
            <div class="stat-card gold">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" /></svg>
                </div>
                <div>
                    <h3>{{ total_reservations|default:0 }}</h3>
                    <p>総予約数</p>
                </div>
            </div>
        </div>

        <div class="card tenant-list-card">
            <h2>テナント一覧</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>テナント名</th>
                            <th>オーナー</th>
                            <th class="hide-on-mobile">スラッグ</th>
                            <th class="hide-on-mobile">作成日</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tenant in tenants %}
                        <tr>
                            <td><strong>{{ tenant.name|escape }}</strong></td>
                            <td>{{ tenant.owner.email|escape }}</td>
                            <td class="hide-on-mobile"><code>{{ tenant.slug|escape }}</code></td>
                            <td class="hide-on-mobile">{{ tenant.created_at|date:"Y/m/d"|default:"不明" }}</td>
                            <td>
                                <div class="tenant-actions">
                                    <a href="{% url 'owner_reserve_list_by_tenant' tenant.slug %}" class="btn btn-primary btn-sm">管理</a>
                                    <a href="{% url 'calendar_by_tenant' tenant.slug %}" class="btn btn-secondary btn-sm" target="_blank" rel="noopener">プレビュー</a>
                                    <a href="/admin/reservations/tenant/{{ tenant.id }}/change/" class="btn btn-accent-outline btn-sm" target="_blank" rel="noopener">設定</a>
                                </div>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="5" class="no-data">
                                <p>テナントが登録されていません。</p>
                                <a href="/admin/reservations/tenant/add/" class="btn btn-primary">新しいテナントを作成</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="footer-links">
            <a href="{% url 'developer_tenant_list' %}" class="btn btn-secondary">全テナント 詳細一覧へ</a>
            <a href="/admin/" class="btn btn-primary" target="_blank" rel="noopener">Django管理画面を開く</a>
        </div>
    </div>
    
    <script>
        // JavaScriptは既存のままで機能するため変更不要です
    </script>
</body>
</html>